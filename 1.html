<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description"
        content="Professional YouTube Video Downloader - Download videos in 4K, 8K, and highest quality formats">
    <meta name="theme-color" content="#dc2626">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <title>HD Video Downloader - 4K & 8K YouTube Downloads</title>

    <!-- Preconnect to external resources -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdn.jsdelivr.net">

    <!-- CSS Dependencies -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.2/font/bootstrap-icons.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
                    },
                    animation: {
                        'gradient': 'gradient 3s ease infinite',
                        'pulse-slow': 'pulse 3s ease-in-out infinite',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'fade-in': 'fadeIn 0.5s ease-in',
                    },
                    keyframes: {
                        gradient: {
                            '0%, 100%': { backgroundPosition: '0% 50%' },
                            '50%': { backgroundPosition: '100% 50%' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: #0f0f0f;
            color: #ffffff;
            overflow-x: hidden;
        }

        .gradient-text {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-gradient {
            background: radial-gradient(ellipse at top, rgba(220, 38, 38, 0.15) 0%, transparent 60%);
        }

        .card-gradient {
            background: linear-gradient(135deg, rgba(31, 41, 55, 0.5) 0%, rgba(17, 24, 39, 0.5) 100%);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .input-glow:focus {
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.2), 0 0 20px rgba(220, 38, 38, 0.15);
        }

        .btn-primary-custom {
            background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
            color: white;
            font-weight: 600;
            padding: 0.75rem 2rem;
            border-radius: 0.75rem;
            border: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary-custom:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(220, 38, 38, 0.3);
        }

        .btn-primary-custom:active {
            transform: translateY(0);
        }

        .quality-card {
            background: rgba(31, 41, 55, 0.3);
            border: 1px solid rgba(55, 65, 81, 0.5);
            border-radius: 1rem;
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quality-card:hover {
            background: rgba(31, 41, 55, 0.5);
            border-color: rgba(220, 38, 38, 0.5);
            transform: translateY(-2px);
        }

        .quality-card.selected {
            background: rgba(220, 38, 38, 0.1);
            border-color: #dc2626;
        }

        .progress-bar-custom {
            height: 6px;
            background: rgba(55, 65, 81, 0.5);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #dc2626 0%, #ef4444 100%);
            border-radius: 3px;
            transition: width 0.3s ease;
        }

        .loading-spinner {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        .skeleton {
            background: linear-gradient(90deg, rgba(55, 65, 81, 0.3) 25%, rgba(75, 85, 99, 0.3) 50%, rgba(55, 65, 81, 0.3) 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
        }

        @keyframes skeleton-loading {
            0% {
                background-position: 200% 0;
            }

            100% {
                background-position: -200% 0;
            }
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem !important;
            }

            .quality-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(31, 41, 55, 0.5);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(107, 114, 128, 0.5);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(156, 163, 175, 0.5);
        }

        /* Performance optimizations */
        .will-change-transform {
            will-change: transform;
        }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>

<body class="min-h-screen">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 backdrop-blur-lg bg-gray-900/70 border-b border-gray-800">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="bi bi-play-circle-fill text-red-600 text-2xl"></i>
                    <h1 class="text-xl font-bold">HD Downloader</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="text-gray-400 hover:text-white transition-colors">
                        <i class="bi bi-moon-stars-fill"></i>
                    </button>
                    <button class="text-gray-400 hover:text-white transition-colors">
                        <i class="bi bi-gear-fill"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-24 pb-12 hero-gradient">
        <div class="container mx-auto px-4">
            <div class="text-center max-w-4xl mx-auto animate-fade-in">
                <h2 class="hero-title text-5xl md:text-6xl font-bold mb-6">
                    Download YouTube Videos in <span class="gradient-text">Ultra HD</span>
                </h2>
                <p class="text-xl text-gray-400 mb-8">
                    Experience the highest quality downloads with support for 4K, 8K, and premium audio formats
                </p>

                <!-- URL Input -->
                <div class="max-w-2xl mx-auto">
                    <div class="relative">
                        <input type="url" id="urlInput" placeholder="Paste YouTube URL here..."
                            class="w-full px-6 py-4 pr-32 bg-gray-800/50 border border-gray-700 rounded-2xl text-white placeholder-gray-500 focus:outline-none input-glow transition-all"
                            autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                        <button id="analyzeBtn" onclick="analyzeVideo()"
                            class="absolute right-2 top-2 bottom-2 px-6 btn-primary-custom rounded-xl">
                            <span class="analyze-text">Analyze</span>
                            <i class="bi bi-search ms-2"></i>
                        </button>
                    </div>
                    <div class="mt-4 flex flex-wrap gap-2 justify-center">
                        <span class="px-3 py-1 bg-gray-800/50 rounded-full text-sm text-gray-400">
                            <i class="bi bi-check-circle-fill text-green-500 me-1"></i> 4K Support
                        </span>
                        <span class="px-3 py-1 bg-gray-800/50 rounded-full text-sm text-gray-400">
                            <i class="bi bi-check-circle-fill text-green-500 me-1"></i> 8K Support
                        </span>
                        <span class="px-3 py-1 bg-gray-800/50 rounded-full text-sm text-gray-400">
                            <i class="bi bi-check-circle-fill text-green-500 me-1"></i> Best Audio
                        </span>
                        <span class="px-3 py-1 bg-gray-800/50 rounded-full text-sm text-gray-400">
                            <i class="bi bi-check-circle-fill text-green-500 me-1"></i> Fast Downloads
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Video Info Section -->
    <section id="videoInfo" class="py-8 hidden animate-slide-up">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto card-gradient rounded-2xl p-6">
                <div class="flex flex-col md:flex-row gap-6">
                    <div class="md:w-1/3">
                        <img id="videoThumbnail" src="" alt="Video thumbnail" class="w-full rounded-xl">
                    </div>
                    <div class="md:w-2/3">
                        <h3 id="videoTitle" class="text-2xl font-bold mb-2"></h3>
                        <div class="flex flex-wrap gap-4 text-gray-400 mb-4">
                            <span><i class="bi bi-person-fill me-1"></i> <span id="videoUploader"></span></span>
                            <span><i class="bi bi-clock-fill me-1"></i> <span id="videoDuration"></span></span>
                            <span><i class="bi bi-eye-fill me-1"></i> <span id="videoViews"></span></span>
                        </div>

                        <!-- Quality Selection -->
                        <div class="mb-4">
                            <h4 class="text-lg font-semibold mb-3">Select Video Quality</h4>
                            <div class="quality-grid grid grid-cols-2 md:grid-cols-4 gap-3" id="qualityOptions">
                                <!-- Quality options will be inserted here -->
                            </div>
                        </div>

                        <!-- Download Button -->
                        <button id="downloadBtn" onclick="startDownload()" class="w-full md:w-auto btn-primary-custom"
                            disabled>
                            <i class="bi bi-download me-2"></i> Start Download
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Download Progress Section -->
    <section id="downloadProgress" class="py-8 hidden animate-slide-up">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto card-gradient rounded-2xl p-6">
                <h3 class="text-xl font-bold mb-4">Download Progress</h3>

                <div class="mb-4">
                    <div class="flex justify-between text-sm text-gray-400 mb-2">
                        <span id="progressStatus">Preparing download...</span>
                        <span id="progressPercent">0%</span>
                    </div>
                    <div class="progress-bar-custom">
                        <div id="progressBar" class="progress-fill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                    <div>
                        <div class="text-2xl font-bold text-red-600" id="downloadSpeed">0 B/s</div>
                        <div class="text-sm text-gray-400">Speed</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-blue-600" id="downloadSize">0 MB</div>
                        <div class="text-sm text-gray-400">Size</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-green-600" id="downloadETA">--:--</div>
                        <div class="text-sm text-gray-400">Time Left</div>
                    </div>
                    <div>
                        <div class="text-2xl font-bold text-purple-600" id="downloadStatus">
                            <i class="bi bi-hourglass-split loading-spinner"></i>
                        </div>
                        <div class="text-sm text-gray-400">Status</div>
                    </div>
                </div>

                <div id="downloadComplete" class="hidden mt-6 text-center">
                    <i class="bi bi-check-circle-fill text-green-500 text-5xl mb-3"></i>
                    <h4 class="text-xl font-bold mb-2">Download Complete!</h4>
                    <p class="text-gray-400 mb-4">Your video is ready</p>
                    <button onclick="location.reload()" class="btn-primary-custom">
                        <i class="bi bi-arrow-clockwise me-2"></i> Download Another
                    </button>
                </div>

                <div id="downloadError" class="hidden mt-6 text-center">
                    <i class="bi bi-x-circle-fill text-red-500 text-5xl mb-3"></i>
                    <h4 class="text-xl font-bold mb-2">Download Failed</h4>
                    <p class="text-gray-400 mb-4" id="errorMessage">An error occurred</p>
                    <button onclick="location.reload()" class="btn-primary-custom">
                        <i class="bi bi-arrow-clockwise me-2"></i> Try Again
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="py-16">
        <div class="container mx-auto px-4">
            <h2 class="text-3xl font-bold text-center mb-12">Why Choose Our Downloader?</h2>
            <div class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                <div class="text-center">
                    <div class="w-16 h-16 bg-red-600/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <i class="bi bi-badge-4k-fill text-red-600 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Ultra HD Quality</h3>
                    <p class="text-gray-400">Download in 4K, 8K, and the highest available quality</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-blue-600/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <i class="bi bi-lightning-charge-fill text-blue-600 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Lightning Fast</h3>
                    <p class="text-gray-400">Optimized servers for maximum download speeds</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-green-600/20 rounded-2xl flex items-center justify-center mx-auto mb-4">
                        <i class="bi bi-shield-check text-green-600 text-2xl"></i>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Safe & Secure</h3>
                    <p class="text-gray-400">No data storage, direct downloads to your device</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 border-t border-gray-800">
        <div class="container mx-auto px-4 text-center text-gray-400">
            <p>&copy; 2025 HD Video Downloader. Made with <i class="bi bi-heart-fill text-red-600"></i> for quality
                enthusiasts</p>
        </div>
    </footer>

    <script>
        // API Configuration
        const API_URL = 'YOUR_RENDER_BACKEND_URL'; // Replace with your Render URL

        let currentVideoInfo = null;
        let selectedQuality = 'best';
        let downloadId = null;
        let progressInterval = null;

        // Utility Functions
        function showElement(id) {
            document.getElementById(id).classList.remove('hidden');
        }

        function hideElement(id) {
            document.getElementById(id).classList.add('hidden');
        }

        function formatDuration(seconds) {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;

            if (hours > 0) {
                return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
            }
            return `${minutes}:${secs.toString().padStart(2, '0')}`;
        }

        function formatViews(views) {
            if (views >= 1000000) {
                return (views / 1000000).toFixed(1) + 'M';
            } else if (views >= 1000) {
                return (views / 1000).toFixed(1) + 'K';
            }
            return views.toString();
        }

        // Analyze Video
        async function analyzeVideo() {
            const urlInput = document.getElementById('urlInput');
            const url = urlInput.value.trim();

            if (!url) {
                alert('Please enter a YouTube URL');
                return;
            }

            const analyzeBtn = document.getElementById('analyzeBtn');
            const originalText = analyzeBtn.innerHTML;
            analyzeBtn.innerHTML = '<i class="bi bi-hourglass-split loading-spinner"></i> Analyzing...';
            analyzeBtn.disabled = true;

            try {
                const response = await fetch(`${API_URL}/api/info`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ url })
                });

                if (!response.ok) {
                    throw new Error('Failed to analyze video');
                }

                const data = await response.json();
                currentVideoInfo = data;

                // Display video info
                document.getElementById('videoThumbnail').src = data.thumbnail;
                document.getElementById('videoTitle').textContent = data.title;
                document.getElementById('videoUploader').textContent = data.uploader;
                document.getElementById('videoDuration').textContent = formatDuration(data.duration);
                document.getElementById('videoViews').textContent = formatViews(data.view_count);

                // Display quality options
                displayQualityOptions(data);

                showElement('videoInfo');

            } catch (error) {
                alert('Error analyzing video: ' + error.message);
            } finally {
                analyzeBtn.innerHTML = originalText;
                analyzeBtn.disabled = false;
            }
        }

        // Display Quality Options
        function displayQualityOptions(videoInfo) {
            const container = document.getElementById('qualityOptions');
            container.innerHTML = '';

            // Add preset qualities
            const presetQualities = [
                { id: 'best', label: 'Best', desc: 'Auto' },
                { id: '8k', label: '8K', desc: '4320p' },
                { id: '4k', label: '4K', desc: '2160p' },
                { id: '1080p', label: 'HD', desc: '1080p' }
            ];

            presetQualities.forEach(quality => {
                const div = document.createElement('div');
                div.className = 'quality-card';
                div.innerHTML = `
                    <div class="text-lg font-semibold">${quality.label}</div>
                    <div class="text-sm text-gray-400">${quality.desc}</div>
                `;
                div.onclick = () => selectQuality(quality.id);
                container.appendChild(div);
            });

            // Select best quality by default
            selectQuality('best');
        }

        // Select Quality
        function selectQuality(quality) {
            selectedQuality = quality;

            // Update UI
            document.querySelectorAll('.quality-card').forEach(card => {
                card.classList.remove('selected');
            });

            event.target.closest('.quality-card').classList.add('selected');

            // Enable download button
            document.getElementById('downloadBtn').disabled = false;
        }

        // Start Download
        async function startDownload() {
            const url = document.getElementById('urlInput').value.trim();

            hideElement('videoInfo');
            showElement('downloadProgress');

            try {
                const response = await fetch(`${API_URL}/api/download`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        url,
                        quality: selectedQuality,
                        audio_quality: 'best'
                    })
                });

                if (!response.ok) {
                    throw new Error('Failed to start download');
                }

                const data = await response.json();
                downloadId = data.download_id;

                // Start progress monitoring
                monitorProgress();

            } catch (error) {
                showDownloadError(error.message);
            }
        }

        // Monitor Download Progress
        function monitorProgress() {
            progressInterval = setInterval(async () => {
                try {
                    const response = await fetch(`${API_URL}/api/progress/${downloadId}`);

                    if (!response.ok) {
                        throw new Error('Failed to get progress');
                    }

                    const data = await response.json();
                    updateProgressUI(data);

                    if (data.status === 'completed') {
                        clearInterval(progressInterval);
                        downloadFile();
                    } else if (data.status === 'error') {
                        clearInterval(progressInterval);
                        showDownloadError(data.error);
                    }

                } catch (error) {
                    clearInterval(progressInterval);
                    showDownloadError(error.message);
                }
            }, 1000);
        }

        // Update Progress UI
        function updateProgressUI(data) {
            document.getElementById('progressPercent').textContent = data.progress + '%';
            document.getElementById('progressBar').style.width = data.progress + '%';
            document.getElementById('downloadSpeed').textContent = data.speed;
            document.getElementById('downloadSize').textContent = data.size;
            document.getElementById('downloadETA').textContent = data.eta;

            const statusText = {
                'preparing': 'Preparing...',
                'downloading': 'Downloading...',
                'processing': 'Processing...',
                'completed': 'Complete!'
            };

            document.getElementById('progressStatus').textContent = statusText[data.status] || data.status;
        }

        // Download File
        async function downloadFile() {
            const downloadUrl = `${API_URL}/api/download/${downloadId}/file`;

            // Create invisible link and trigger download
            const link = document.createElement('a');
            link.href = downloadUrl;
            link.download = currentVideoInfo.title + '.mp4';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            // Show completion
            hideElement('downloadProgress');
            showElement('downloadComplete');
        }

        // Show Download Error
        function showDownloadError(message) {
            document.getElementById('errorMessage').textContent = message;
            hideElement('downloadProgress');
            showElement('downloadError');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Handle Enter key in URL input
            document.getElementById('urlInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    analyzeVideo();
                }
            });

            // Auto-focus URL input
            document.getElementById('urlInput').focus();
        });

        // Performance monitoring
        if ('PerformanceObserver' in window) {
            const perfObserver = new PerformanceObserver((list) => {
                for (const entry of list.getEntries()) {
                    console.log('Performance:', entry.name, entry.duration);
                }
            });
            perfObserver.observe({ entryTypes: ['measure', 'navigation'] });
        }
    </script>
</body>

</html>